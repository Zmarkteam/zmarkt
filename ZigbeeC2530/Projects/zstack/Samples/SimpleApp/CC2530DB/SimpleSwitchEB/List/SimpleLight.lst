###############################################################################
#                                                                             #
# IAR C/C++ Compiler V7.60.1.40026 for 8051             09/Jan/2012  21:02:58 #
# Copyright (C) 2004-2010 IAR Systems AB.                                     #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\Source\SimpleLight.c                         #
#    Command line       =  -f F:\Zigbee节点控制程序\Projects\zstack\Samples\S #
#                          impleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev #
#                          .cfg (-DCPU32MHZ -DROOT=__near_func                #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f F:\Zigbee节点控制程序\Proje #
#                          cts\zstack\Samples\SimpleApp\CC2530DB\..\..\..\Too #
#                          ls\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0  #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 F:\Zigbee节点控制程序\Proje #
#                          cts\zstack\Samples\SimpleApp\Source\SimpleLight.c  #
#                          -D NWK_AUTO_POLL -D HOLD_AUTO_START -D REFLECTOR   #
#                          -D POWER_SAVING -D NV_INIT -D xNV_RESTORE -D       #
#                          xZTOOL_P1 -D xMT_TASK -D xMT_SYS_FUNC -D           #
#                          xMT_SAPI_FUNC -D xMT_SAPI_CB_FUNC -lC              #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\SimpleSwitchEB\List\ -lA            #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\SimpleSwitchEB\List\                #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\SimpleSwitchEB\Obj\ -e              #
#                          --require_prototypes --no_code_motion --debug      #
#                          --core=plain --dptr=16,1 --data_model=large        #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I F:\Zigbee节点控制程序\Proj #
#                          ects\zstack\Samples\SimpleApp\CC2530DB\ -I         #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\Source\ -I                       #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\ZMain\TI2530DB\ -I         #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\hal\inclu #
#                          de\ -I F:\Zigbee节点控制程序\Projects\zstack\Sampl #
#                          es\SimpleApp\CC2530DB\..\..\..\..\..\Components\ha #
#                          l\target\CC2530EB\ -I F:\Zigbee节点控制程序\Projec #
#                          ts\zstack\Samples\SimpleApp\CC2530DB\..\..\..\..\. #
#                          .\Components\mac\include\ -I                       #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\mac\high_ #
#                          level\ -I F:\Zigbee节点控制程序\Projects\zstack\Sa #
#                          mples\SimpleApp\CC2530DB\..\..\..\..\..\Components #
#                          \mac\low_level\srf04\ -I                           #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\mac\low_l #
#                          evel\srf04\single_chip\ -I                         #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\mt\ -I    #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\osal\incl #
#                          ude\ -I F:\Zigbee节点控制程序\Projects\zstack\Samp #
#                          les\SimpleApp\CC2530DB\..\..\..\..\..\Components\o #
#                          sal\mcu\ccsoc\ -I F:\Zigbee节点控制程序\Projects\z #
#                          stack\Samples\SimpleApp\CC2530DB\..\..\..\..\..\Co #
#                          mponents\services\saddr\ -I                        #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\services\ #
#                          sdata\ -I F:\Zigbee节点控制程序\Projects\zstack\Sa #
#                          mples\SimpleApp\CC2530DB\..\..\..\..\..\Components #
#                          \stack\af\ -I F:\Zigbee节点控制程序\Projects\zstac #
#                          k\Samples\SimpleApp\CC2530DB\..\..\..\..\..\Compon #
#                          ents\stack\nwk\ -I F:\Zigbee节点控制程序\Projects\ #
#                          zstack\Samples\SimpleApp\CC2530DB\..\..\..\..\..\C #
#                          omponents\stack\sapi\ -I                           #
#                          F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\..\..\..\..\..\Components\stack\sec #
#                          \ -I F:\Zigbee节点控制程序\Projects\zstack\Samples #
#                          \SimpleApp\CC2530DB\..\..\..\..\..\Components\stac #
#                          k\sys\ -I F:\Zigbee节点控制程序\Projects\zstack\Sa #
#                          mples\SimpleApp\CC2530DB\..\..\..\..\..\Components #
#                          \stack\zdo\ -I F:\Zigbee节点控制程序\Projects\zsta #
#                          ck\Samples\SimpleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\zmac\ -I F:\Zigbee节点控制程序\Projects\zsta #
#                          ck\Samples\SimpleApp\CC2530DB\..\..\..\..\..\Compo #
#                          nents\zmac\f8w\ -I "D:\Program Files\IAR           #
#                          Systems\Embedded Workbench 5.4\8051\INC\" -I       #
#                          "D:\Program Files\IAR Systems\Embedded Workbench   #
#                          5.4\8051\INC\CLIB\" -Ohz                           #
#    List file          =  F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\SimpleSwitchEB\List\SimpleLight.lst #
#    Object file        =  F:\Zigbee节点控制程序\Projects\zstack\Samples\Simp #
#                          leApp\CC2530DB\SimpleSwitchEB\Obj\SimpleLight.r51  #
#                                                                             #
#                                                                             #
###############################################################################

F:\Zigbee节点控制程序\Projects\zstack\Samples\SimpleApp\Source\SimpleLight.c
      1          
      2          /**************************************************************************************************
      3            Filename:       SimpleSwitch.c
      4            Revised:        $Date: 2007-10-27 17:16:54 -0700 (Sat, 27 Oct 2007) $
      5            Revision:       $Revision: 15793 $
      6          
      7            Description:    Sample application for a simple light switch utilizing the Simple API.
      8          
      9           
     10            Copyright 2007 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com. 
     39          **************************************************************************************************/
     40          
     41          /******************************************************************************
     42           * INCLUDES
     43           */
     44          
     45          #include "ZComDef.h"
     46          #include "OSAL.h"
     47          #include "sapi.h"
     48          #include "hal_key.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1
     49          #include "hal_led.h"
     50          #include "hal_adc.h"
     51          #include "hal_mcu.h"
     52          #include "SimpleApp.h"
     53          
     54          
     55          #include "mt.h"
     56          
     57          /*********************************************************************
     58           * CONSTANTS
     59           */
     60          
     61          // Application States
     62          #define APP_INIT                           0    // Initial state
     63          #define APP_START                          1    // Sensor has joined network
     64          #define APP_BOUND                          2    // Sensor is bound to collector
     65          
     66          // Application osal event identifiers
     67          // Bit mask of events ( from 0x0000 to 0x00FF )
     68          #define MY_START_EVT                0x0001
     69          #define MY_REPORT_EVT               0x0002
     70          
     71          /*********************************************************************
     72           * TYPEDEFS
     73           */
     74          
     75          /*********************************************************************
     76           * LOCAL VARIABLES
     77           */
     78          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     79          static uint8 myAppState = APP_INIT;
                              ^
Warning[Pe550]: variable "myAppState" was set but never used
   \                     myAppState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     80          

   \                                 In  segment XDATA_I, align 1, keep-with-next
     81          static uint16 myStartRetryDelay = 10000;      // milliseconds
   \                     myStartRetryDelay:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for myStartRetryDelay>`
   \   000002                REQUIRE __INIT_XDATA_I
     82          
     83          
     84          
     85          /* */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     86          static byte brightness = 0;
   \                     brightness:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     87          static byte lightstatus = 0; 
   \                     lightstatus:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     88          
     89          #define LIGHT01_DDR   P0DIR
     90          #define LIGHT01_SBIT  P0_5
     91          #define LIGHT01_BV    BV(5)
     92          
     93          void light_init(void);
     94          void light_onoff(uint8 st);
     95          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     96          void light_init(void)
   \                     light_init:
     97          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
     98              LIGHT01_DDR |= LIGHT01_BV;
   \   000004   43FD20       ORL     0xfd,#0x20
     99              lightstatus = 0;
   \   000007   E4           CLR     A
   \   000008   90....       MOV     DPTR,#lightstatus
   \   00000B   F0           MOVX    @DPTR,A
    100              light_onoff(0);
   \   00000C                ; Setup parameters for call to function light_onoff
   \   00000C   F9           MOV     R1,A
   \   00000D   12....       LCALL   ??light_onoff?relay
    101          }
   \   000010   D083         POP     DPH
   \   000012   D082         POP     DPL
   \   000014   02....       LJMP    ?BRET
   \   000017                REQUIRE P0DIR
    102          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    103          void light_onoff(uint8 st)
   \                     light_onoff:
    104          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    105            if (st == 0) {
   \   000000   E9           MOV     A,R1
   \   000001   7004         JNZ     ??light_onoff_0
    106             st( LIGHT01_SBIT = ACTIVE_LOW (1); );
   \   000003   C285         CLR     0x80.5
   \   000005   8002         SJMP    ??light_onoff_1
    107            } else {
    108                st( LIGHT01_SBIT = ACTIVE_LOW (0); );
   \                     ??light_onoff_0:
   \   000007   D285         SETB    0x80.5
    109            }
    110          }
   \                     ??light_onoff_1:
   \   000009   02....       LJMP    ?BRET
   \   00000C                REQUIRE _A_P0
    111          
    112          /*********************************************************************
    113           * GLOBAL VARIABLES
    114           */
    115          
    116          // Inputs and Outputs for Switch device
    117          #define NUM_IN_CMD_SENSOR                 2
    118          #define NUM_OUT_CMD_SENSOR                3
    119          
    120          

   \                                 In  segment XDATA_ROM_C, align 1
    121          const cId_t zb_InCmdList[NUM_IN_CMD_SENSOR] =
   \                     zb_InCmdList:
   \   000000   01000200     DW 1, 2
    122          {
    123            ID_CMD_READ_REQ,
    124            ID_CMD_WRITE_REQ,
    125          };

   \                                 In  segment XDATA_ROM_C, align 1
    126          const cId_t zb_OutCmdList[NUM_OUT_CMD_SENSOR] =
   \                     zb_OutCmdList:
   \   000000   01800280     DW 32769, 32770, 3
   \            0300    
    127          {
    128              ID_CMD_READ_RES,
    129              ID_CMD_WRITE_RES,
    130              ID_CMD_REPORT,
    131          };
    132          
    133          
    134          #define TEMP_REPORT     0x01
    135          #define BATTERY_REPORT 0x02
    136          
    137          
    138          // Define SimpleDescriptor for Switch device

   \                                 In  segment XDATA_ROM_C, align 1
    139          const SimpleDescriptionFormat_t zb_SimpleDesc =
   \                     zb_SimpleDesc:
   \   000000   02           DB 2
   \   000001   100F0300     DW 3856, 3
   \   000005   0102         DB 1, 2
   \   000007   ....         DW zb_InCmdList
   \   000009   03           DB 3
   \   00000A   ....         DW zb_OutCmdList
    140          {
    141            MY_ENDPOINT_ID,             //  Endpoint
    142            MY_PROFILE_ID,              //  Profile ID
    143            DEV_ID_SENSOR,              //  Device ID
    144            DEVICE_VERSION_SENSOR,      //  Device Version
    145            0,                          //  Reserved
    146            NUM_IN_CMD_SENSOR,          //  Number of Input Commands
    147            (cId_t *) zb_InCmdList,             //  Input Command List
    148            NUM_OUT_CMD_SENSOR,         //  Number of Output Commands
    149            (cId_t *) zb_OutCmdList     //  Output Command List
    150          };
    151          
    152          /********************************************************
    153           *
    154           */
    155          void zb_HanderMsg(osal_event_hdr_t *msg);
    156          
    157          /*********************************************************************
    158           * LOCAL FUNCTIONS
    159           */
    160          static void lightSet(byte st);
    161          
    162          static int paramWrite(uint16 pid, byte *dat);
    163          static int paramRead(uint16 pid, byte *dat);
    164          
    165          /*****************************************************************************
    166           * @fn          zb_HandleOsalEvent
    167           *
    168           * @brief       The zb_HandleOsalEvent function is called by the operating
    169           *              system when a task event is set
    170           *
    171           * @param       event - Bitmask containing the events that have been set
    172           *
    173           * @return      none
    174           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    175          void zb_HandleOsalEvent( uint16 event )
   \                     zb_HandleOsalEvent:
    176          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 8
   \   000005   74F8         MOV     A,#-0x8
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    177           
    178             if (event & ZB_ENTRY_EVENT) {
   \   00000E   7410         MOV     A,#0x10
   \   000010   5F           ANL     A,R7
   \   000011   F9           MOV     R1,A
   \   000012   E4           CLR     A
   \   000013   7001         JNZ     ??zb_HandleOsalEvent_0
   \   000015   E9           MOV     A,R1
   \                     ??zb_HandleOsalEvent_0:
   \   000016   6054         JZ      ??zb_HandleOsalEvent_1
    179                  uint8 startOptions;
    180                  uint8 logicalType;
    181            
    182                  zb_ReadConfiguration( ZCD_NV_LOGICAL_TYPE, sizeof(uint8), &logicalType );
   \   000018                ; Setup parameters for call to function zb_ReadConfiguration
   \   000018   85..82       MOV     DPL,?XSP + 0
   \   00001B   85..83       MOV     DPH,?XSP + 1
   \   00001E   AC82         MOV     R4,DPL
   \   000020   AD83         MOV     R5,DPH
   \   000022   7A01         MOV     R2,#0x1
   \   000024   7987         MOV     R1,#-0x79
   \   000026   12....       LCALL   ??zb_ReadConfiguration?relay
    183                  //if ( logicalType != ZG_DEVICETYPE_ENDDEVICE )
    184                  if ( logicalType != ZG_DEVICETYPE_ROUTER )
   \   000029   85..82       MOV     DPL,?XSP + 0
   \   00002C   85..83       MOV     DPH,?XSP + 1
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   6401         XRL     A,#0x1
   \   000032   600D         JZ      ??zb_HandleOsalEvent_2
    185                  //if ( logicalType != ZG_DEVICETYPE_COORDINATOR )
    186                  {
    187                  //  logicalType = ZG_DEVICETYPE_ENDDEVICE;
    188                    logicalType = ZG_DEVICETYPE_ROUTER;
   \   000034   7401         MOV     A,#0x1
   \   000036   F0           MOVX    @DPTR,A
    189                    //logicalType = ZG_DEVICETYPE_COORDINATOR;
    190                    zb_WriteConfiguration(ZCD_NV_LOGICAL_TYPE, sizeof(uint8), &logicalType);
   \   000037                ; Setup parameters for call to function zb_WriteConfiguration
   \   000037   AC82         MOV     R4,DPL
   \   000039   AD83         MOV     R5,DPH
   \   00003B   FA           MOV     R2,A
   \   00003C   7987         MOV     R1,#-0x79
   \   00003E   12....       LCALL   ??zb_WriteConfiguration?relay
    191                  }
    192          
    193                  // Do more configuration if necessary and then restart device with auto-start bit set
    194                  // write endpoint to simple desc...dont pass it in start req..then reset
    195                  zb_ReadConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \                     ??zb_HandleOsalEvent_2:
   \   000041                ; Setup parameters for call to function zb_ReadConfiguration
   \   000041   7401         MOV     A,#0x1
   \   000043   12....       LCALL   ?XSTACK_DISP0_8
   \   000046   AC82         MOV     R4,DPL
   \   000048   AD83         MOV     R5,DPH
   \   00004A   7A01         MOV     R2,#0x1
   \   00004C   7903         MOV     R1,#0x3
   \   00004E   12....       LCALL   ??zb_ReadConfiguration?relay
    196                  if (startOptions != ZCD_STARTOPT_AUTO_START) {
   \   000051   7401         MOV     A,#0x1
   \   000053   12....       LCALL   ?XSTACK_DISP0_8
   \   000056   E0           MOVX    A,@DPTR
   \   000057   6404         XRL     A,#0x4
   \   000059   600E         JZ      ??zb_HandleOsalEvent_3
    197                    startOptions = ZCD_STARTOPT_AUTO_START;
   \   00005B   7404         MOV     A,#0x4
   \   00005D   F0           MOVX    @DPTR,A
    198                    zb_WriteConfiguration( ZCD_NV_STARTUP_OPTION, sizeof(uint8), &startOptions );
   \   00005E                ; Setup parameters for call to function zb_WriteConfiguration
   \   00005E   AC82         MOV     R4,DPL
   \   000060   AD83         MOV     R5,DPH
   \   000062   7A01         MOV     R2,#0x1
   \   000064   7903         MOV     R1,#0x3
   \   000066   12....       LCALL   ??zb_WriteConfiguration?relay
    199                  } 
    200                  
    201                  light_init();
   \                     ??zb_HandleOsalEvent_3:
   \   000069                ; Setup parameters for call to function light_init
   \   000069   12....       LCALL   ??light_init?relay
    202            }
    203            
    204            if ( event & MY_START_EVT )
   \                     ??zb_HandleOsalEvent_1:
   \   00006C   EE           MOV     A,R6
   \   00006D   A2E0         MOV     C,0xE0 /* A   */.0
   \   00006F   5003         JNC     ??zb_HandleOsalEvent_4
    205            {  
    206              zb_StartRequest();
   \   000071                ; Setup parameters for call to function zb_StartRequest
   \   000071   12....       LCALL   ??zb_StartRequest?relay
    207            }
    208          
    209            if (event & MY_REPORT_EVT) {
   \                     ??zb_HandleOsalEvent_4:
   \   000074   EE           MOV     A,R6
   \   000075   5402         ANL     A,#0x2
   \   000077   6079         JZ      ??zb_HandleOsalEvent_5
    210              byte dat[6];
    211              HalLedSet( HAL_LED_1, HAL_LED_MODE_OFF );
   \   000079                ; Setup parameters for call to function HalLedSet
   \   000079   12....       LCALL   ?Subroutine1 & 0xFFFF
    212              HalLedSet( HAL_LED_1, HAL_LED_MODE_BLINK );
    213              dat[0] =  0x02;
   \                     ??CrossCallReturnLabel_0:
   \   00007C   7402         MOV     A,#0x2
   \   00007E   12....       LCALL   ?XSTACK_DISP0_8
   \   000081   7402         MOV     A,#0x2
   \   000083   F0           MOVX    @DPTR,A
    214              dat[1] =  0x02;
   \   000084   7403         MOV     A,#0x3
   \   000086   12....       LCALL   ?XSTACK_DISP0_8
   \   000089   7402         MOV     A,#0x2
   \   00008B   F0           MOVX    @DPTR,A
    215              dat[2] = lightstatus;
   \   00008C   90....       MOV     DPTR,#lightstatus
   \   00008F   E0           MOVX    A,@DPTR
   \   000090   C0E0         PUSH    A
   \   000092   7404         MOV     A,#0x4
   \   000094   12....       LCALL   ?XSTACK_DISP0_8
   \   000097   D0E0         POP     A
   \   000099   F0           MOVX    @DPTR,A
    216              dat[3] = 0x02;
   \   00009A   7405         MOV     A,#0x5
   \   00009C   12....       LCALL   ?XSTACK_DISP0_8
   \   00009F   7402         MOV     A,#0x2
   \   0000A1   F0           MOVX    @DPTR,A
    217              dat[4] = 0x01;
   \   0000A2   7406         MOV     A,#0x6
   \   0000A4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A7   7401         MOV     A,#0x1
   \   0000A9   F0           MOVX    @DPTR,A
    218              dat[5] = lightstatus;
   \   0000AA   90....       MOV     DPTR,#lightstatus
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   C0E0         PUSH    A
   \   0000B0   7407         MOV     A,#0x7
   \   0000B2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000B5   D0E0         POP     A
   \   0000B7   F0           MOVX    @DPTR,A
    219              zb_SendDataRequest(0, ID_CMD_REPORT, 6, dat, 0, AF_ACK_REQUEST, 0 );  
   \   0000B8                ; Setup parameters for call to function zb_SendDataRequest
   \   0000B8   75..00       MOV     ?V0 + 0,#0x0
   \   0000BB   78..         MOV     R0,#?V0 + 0
   \   0000BD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000C0   75..10       MOV     ?V0 + 0,#0x10
   \   0000C3   78..         MOV     R0,#?V0 + 0
   \   0000C5   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000C8   75..00       MOV     ?V0 + 0,#0x0
   \   0000CB   78..         MOV     R0,#?V0 + 0
   \   0000CD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D0   7405         MOV     A,#0x5
   \   0000D2   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D5   8582..       MOV     ?V0 + 0,DPL
   \   0000D8   8583..       MOV     ?V0 + 1,DPH
   \   0000DB   78..         MOV     R0,#?V0 + 0
   \   0000DD   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E0   7906         MOV     R1,#0x6
   \   0000E2   7C03         MOV     R4,#0x3
   \   0000E4   7D00         MOV     R5,#0x0
   \   0000E6   7A00         MOV     R2,#0x0
   \   0000E8   7B00         MOV     R3,#0x0
   \   0000EA   12....       LCALL   ??zb_SendDataRequest?relay
   \   0000ED   7405         MOV     A,#0x5
   \   0000EF   12....       LCALL   ?DEALLOC_XSTACK8
    220            }
    221            
    222            
    223            
    224          }
   \                     ??zb_HandleOsalEvent_5:
   \   0000F2   7408         MOV     A,#0x8
   \   0000F4   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F7                REQUIRE ?Subroutine0
   \   0000F7                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7A00         MOV     R2,#0x0
   \   000002   7901         MOV     R1,#0x1
   \   000004   12....       LCALL   ??HalLedSet?relay
   \   000007                ; Setup parameters for call to function HalLedSet
   \   000007                ; Setup parameters for call to function HalLedSet
   \   000007   7A02         MOV     R2,#0x2
   \   000009   7901         MOV     R1,#0x1
   \   00000B   12....       LCALL   ??HalLedSet?relay
   \   00000E   22           RET
    225          /*********************************************************************
    226           * @fn      zb_HandleKeys
    227           *
    228           * @brief   Handles all key events for this device.
    229           *
    230           * @param   shift - true if in shift/alt.
    231           * @param   keys - bit field for key events. Valid entries:
    232           *                 EVAL_SW4
    233           *                 EVAL_SW3
    234           *                 EVAL_SW2
    235           *                 EVAL_SW1
    236           *
    237           * @return  none
    238           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    239          void zb_HandleKeys( uint8 shift, uint8 keys )
   \                     zb_HandleKeys:
    240          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    241           
    242          }
   \   000000   02....       LJMP    ?BRET
    243          /******************************************************************************
    244           * @fn          zb_StartConfirm
    245           *
    246           * @brief       The zb_StartConfirm callback is called by the ZigBee stack
    247           *              after a start request operation completes
    248           *
    249           * @param       status - The status of the start operation.  Status of
    250           *                       ZB_SUCCESS indicates the start operation completed
    251           *                       successfully.  Else the status is an error code.
    252           *
    253           * @return      none
    254           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    255          void zb_StartConfirm( uint8 status )
   \                     zb_StartConfirm:
    256          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    257            if ( status == ZB_SUCCESS )
   \   000006   7008         JNZ     ??zb_StartConfirm_0
    258            {
    259              myAppState = APP_START;
   \   000008   7401         MOV     A,#0x1
   \   00000A   90....       MOV     DPTR,#myAppState
   \   00000D   F0           MOVX    @DPTR,A
   \   00000E   8014         SJMP    ??zb_StartConfirm_1
    260              // Set event to bind to a collector
    261              //osal_start_timerEx( sapi_TaskID, MY_FIND_COLLECTOR_EVT, myBindRetryDelay );
    262            }
    263            else
    264            {
    265              // Try joining again later with a delay
    266              osal_start_timerEx( sapi_TaskID, MY_START_EVT, myStartRetryDelay );
   \                     ??zb_StartConfirm_0:
   \   000010                ; Setup parameters for call to function osal_start_timerEx
   \   000010   90....       MOV     DPTR,#myStartRetryDelay
   \   000013   E0           MOVX    A,@DPTR
   \   000014   FC           MOV     R4,A
   \   000015   A3           INC     DPTR
   \   000016   E0           MOVX    A,@DPTR
   \   000017   FD           MOV     R5,A
   \   000018   7A01         MOV     R2,#0x1
   \   00001A   7B00         MOV     R3,#0x0
   \   00001C   90....       MOV     DPTR,#sapi_TaskID
   \   00001F   E0           MOVX    A,@DPTR
   \   000020   F9           MOV     R1,A
   \   000021   12....       LCALL   ??osal_start_timerEx?relay
    267            }
    268          }
   \                     ??zb_StartConfirm_1:
   \   000024   7F01         MOV     R7,#0x1
   \   000026   02....       LJMP    ?BANKED_LEAVE_XDATA
    269          /******************************************************************************
    270           * @fn          zb_SendDataConfirm
    271           *
    272           * @brief       The zb_SendDataConfirm callback function is called by the
    273           *              ZigBee after a send data operation completes
    274           *
    275           * @param       handle - The handle identifying the data transmission.
    276           *              status - The status of the operation.
    277           *
    278           * @return      none
    279           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    280          void zb_SendDataConfirm( uint8 handle, uint8 status )
   \                     zb_SendDataConfirm:
    281          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    282            if ( status != ZSuccess )
    283            {
    284              // Remove bindings to the existing collector
    285            }
    286            else
    287            {
    288              // send data ??
    289            }
    290          }
   \   000000   02....       LJMP    ?BRET
    291          /******************************************************************************
    292           * @fn          zb_BindConfirm
    293           *
    294           * @brief       The zb_BindConfirm callback is called by the ZigBee stack
    295           *              after a bind operation completes.
    296           *
    297           * @param       commandId - The command ID of the binding being confirmed.
    298           *              status - The status of the bind operation.
    299           *
    300           * @return      none
    301           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    302          void zb_BindConfirm( uint16 commandId, uint8 status )
   \                     zb_BindConfirm:
    303          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    304          
    305          
    306          }
   \   000000   02....       LJMP    ?BRET
    307          /******************************************************************************
    308           * @fn          zb_AllowBindConfirm
    309           *
    310           * @brief       Indicates when another device attempted to bind to this device
    311           *
    312           * @param
    313           *
    314           * @return      none
    315           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    316          void zb_AllowBindConfirm( uint16 source )
   \                     zb_AllowBindConfirm:
    317          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    318          }
   \   000000   02....       LJMP    ?BRET
    319          /******************************************************************************
    320           * @fn          zb_FindDeviceConfirm
    321           *
    322           * @brief       The zb_FindDeviceConfirm callback function is called by the
    323           *              ZigBee stack when a find device operation completes.
    324           *
    325           * @param       searchType - The type of search that was performed.
    326           *              searchKey - Value that the search was executed on.
    327           *              result - The result of the search.
    328           *
    329           * @return      none
    330           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    331          void zb_FindDeviceConfirm( uint8 searchType, uint8 *searchKey, uint8 *result )
   \                     zb_FindDeviceConfirm:
    332          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    333          }
   \   000000   02....       LJMP    ?BRET
    334          
    335          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    336          void zb_HanderMsg(osal_event_hdr_t *msg)
   \                     zb_HanderMsg:
    337          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    338          }
   \   000000   02....       LJMP    ?BRET
    339          
    340          /******************************************************************************
    341           * @fn          zb_ReceiveDataIndication
    342           *
    343           * @brief       The zb_ReceiveDataIndication callback function is called
    344           *              asynchronously by the ZigBee stack to notify the application
    345           *              when data is received from a peer device.
    346           *
    347           * @param       source - The short address of the peer device that sent the data
    348           *              command - The commandId associated with the data
    349           *              len - The number of bytes in the pData parameter
    350           *              pData - The data sent by the peer device
    351           *
    352           * @return      none
    353           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    354          void zb_ReceiveDataIndication( uint16 source, uint16 command, uint16 len, uint8 *pData  )
   \                     zb_ReceiveDataIndication:
    355          {
   \   000000   74EE         MOV     A,#-0x12
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 18
   \   000005                ; Auto size: 64
   \   000005   74C0         MOV     A,#-0x40
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   8C..         MOV     ?V0 + 0,R4
   \   000010   8D..         MOV     ?V0 + 1,R5
   \   000012   7452         MOV     A,#0x52
   \   000014   12....       LCALL   ?XSTACK_DISP0_8
   \   000017   E0           MOVX    A,@DPTR
   \   000018   F5..         MOV     ?V0 + 4,A
   \   00001A   A3           INC     DPTR
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   F5..         MOV     ?V0 + 5,A
   \   00001E   7454         MOV     A,#0x54
   \   000020   12....       LCALL   ?XSTACK_DISP0_8
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F5..         MOV     ?V0 + 2,A
   \   000026   A3           INC     DPTR
   \   000027   E0           MOVX    A,@DPTR
   \   000028   F5..         MOV     ?V0 + 3,A
    356            int i;
    357            uint16 pid;
    358            byte dat[64];
    359            byte rlen = 1;
   \   00002A   75..01       MOV     ?V0 + 6,#0x1
    360            int ret;
    361            
    362            HalLedSet( HAL_LED_1, HAL_LED_MODE_OFF );
   \   00002D                ; Setup parameters for call to function HalLedSet
   \   00002D   12....       LCALL   ?Subroutine1 & 0xFFFF
    363            HalLedSet( HAL_LED_1, HAL_LED_MODE_BLINK ); 
    364            switch (command) {
   \                     ??CrossCallReturnLabel_1:
   \   000030   78..         MOV     R0,#?V0 + 0
   \   000032   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for zb_ReceiveDataIndication>_0`:
   \   000035   0100         DW        1
   \   000037   01           DB        1
   \   000038   ....         DW        ??zb_ReceiveDataIndication_0
   \   00003A   ....         DW        ??zb_ReceiveDataIndication_1
   \   00003C   ....         DW        ??zb_ReceiveDataIndication_2
    365            case ID_CMD_WRITE_REQ:
    366              for (i=0; i<len; i+=2) {
   \                     ??zb_ReceiveDataIndication_2:
   \   00003E   75..00       MOV     ?V0 + 0,#0x0
   \   000041   75..00       MOV     ?V0 + 1,#0x0
   \   000044   8012         SJMP    ??zb_ReceiveDataIndication_3
    367                pid = pData[i]<<8 | pData[i+1];
    368                ret = paramWrite(pid, pData+2);
    369                if (ret <= 0) {
    370                  dat[0] = 1;
    371                  zb_SendDataRequest( source, ID_CMD_WRITE_RES, 1, dat, 0, AF_ACK_REQUEST, 0 );
    372                  return;
    373                } 
    374                i += ret;
   \                     ??zb_ReceiveDataIndication_4:
   \   000046   7402         MOV     A,#0x2
   \   000048   28           ADD     A,R0
   \   000049   08           INC     R0
   \   00004A   08           INC     R0
   \   00004B   E4           CLR     A
   \   00004C   39           ADDC    A,R1
   \   00004D   F9           MOV     R1,A
   \   00004E   E5..         MOV     A,?V0 + 0
   \   000050   28           ADD     A,R0
   \   000051   F5..         MOV     ?V0 + 0,A
   \   000053   E5..         MOV     A,?V0 + 1
   \   000055   39           ADDC    A,R1
   \   000056   F5..         MOV     ?V0 + 1,A
   \                     ??zb_ReceiveDataIndication_3:
   \   000058   C3           CLR     C
   \   000059   E5..         MOV     A,?V0 + 0
   \   00005B   95..         SUBB    A,?V0 + 4
   \   00005D   E5..         MOV     A,?V0 + 1
   \   00005F   95..         SUBB    A,?V0 + 5
   \   000061   506E         JNC     ??zb_ReceiveDataIndication_5
   \   000063   E5..         MOV     A,?V0 + 2
   \   000065   25..         ADD     A,?V0 + 0
   \   000067   F582         MOV     DPL,A
   \   000069   E5..         MOV     A,?V0 + 3
   \   00006B   35..         ADDC    A,?V0 + 1
   \   00006D   F583         MOV     DPH,A
   \   00006F                ; Setup parameters for call to function paramWrite
   \   00006F   E5..         MOV     A,?V0 + 2
   \   000071   2402         ADD     A,#0x2
   \   000073   FC           MOV     R4,A
   \   000074   E5..         MOV     A,?V0 + 3
   \   000076   3400         ADDC    A,#0x0
   \   000078   FD           MOV     R5,A
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F9           MOV     R1,A
   \   00007B   A3           INC     DPTR
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   FA           MOV     R2,A
   \   00007E   E9           MOV     A,R1
   \   00007F   FB           MOV     R3,A
   \   000080   12....       LCALL   ??paramWrite?relay
   \   000083   8A..         MOV     ?V0 + 6,R2
   \   000085   8B..         MOV     ?V0 + 7,R3
   \   000087   A8..         MOV     R0,?V0 + 6
   \   000089   A9..         MOV     R1,?V0 + 7
   \   00008B   C3           CLR     C
   \   00008C   E8           MOV     A,R0
   \   00008D   9401         SUBB    A,#0x1
   \   00008F   E9           MOV     A,R1
   \   000090   9400         SUBB    A,#0x0
   \   000092   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000094   65D0         XRL     A,PSW
   \   000096   33           RLC     A
   \   000097   50AD         JNC     ??zb_ReceiveDataIndication_4
   \   000099   7401         MOV     A,#0x1
   \   00009B   85..82       MOV     DPL,?XSP + 0
   \   00009E   85..83       MOV     DPH,?XSP + 1
   \   0000A1   F0           MOVX    @DPTR,A
   \   0000A2                ; Setup parameters for call to function zb_SendDataRequest
   \   0000A2   75..00       MOV     ?V0 + 0,#0x0
   \                     ??zb_ReceiveDataIndication_6:
   \   0000A5   78..         MOV     R0,#?V0 + 0
   \   0000A7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000AA   75..10       MOV     ?V0 + 0,#0x10
   \   0000AD   78..         MOV     R0,#?V0 + 0
   \   0000AF   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000B2   75..00       MOV     ?V0 + 0,#0x0
   \   0000B5   78..         MOV     R0,#?V0 + 0
   \   0000B7   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000BA   7403         MOV     A,#0x3
   \   0000BC   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BF   8582..       MOV     ?V0 + 0,DPL
   \   0000C2   8583..       MOV     ?V0 + 1,DPH
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000CA   7901         MOV     R1,#0x1
   \   0000CC   7C02         MOV     R4,#0x2
   \   0000CE   02....       LJMP    ??zb_ReceiveDataIndication_7 & 0xFFFF
    375              }
    376              dat[0] = 0;
   \                     ??zb_ReceiveDataIndication_5:
   \   0000D1   E4           CLR     A
   \   0000D2   85..82       MOV     DPL,?XSP + 0
   \   0000D5   85..83       MOV     DPH,?XSP + 1
   \   0000D8   F0           MOVX    @DPTR,A
    377              zb_SendDataRequest( source, ID_CMD_WRITE_RES, 1, dat, 0, AF_ACK_REQUEST, 0 );
   \   0000D9                ; Setup parameters for call to function zb_SendDataRequest
   \   0000D9   F5..         MOV     ?V0 + 0,A
   \   0000DB   80C8         SJMP    ??zb_ReceiveDataIndication_6
    378              break;
    379            case ID_CMD_READ_REQ:
    380              for (i=0; i<len; i+=2) {
   \                     ??zb_ReceiveDataIndication_1:
   \   0000DD   75..00       MOV     ?V0 + 0,#0x0
   \   0000E0   75..00       MOV     ?V0 + 1,#0x0
   \   0000E3   8011         SJMP    ??zb_ReceiveDataIndication_8
    381                pid = pData[i]<<8 | pData[i+1];
    382                dat[rlen++] = pData[i];
    383                dat[rlen++] = pData[i+1];
    384                ret = paramRead(pid, dat+rlen);
    385                if (ret <= 0) {
    386                  dat[0] = 1;
    387                  zb_SendDataRequest( source, ID_CMD_READ_RES, 1, dat, 0, AF_ACK_REQUEST, 0 );
    388                  return;
    389                }
    390                rlen += ret;
   \                     ??zb_ReceiveDataIndication_9:
   \   0000E5   E8           MOV     A,R0
   \   0000E6   25..         ADD     A,?V0 + 6
   \   0000E8   F5..         MOV     ?V0 + 6,A
   \   0000EA   E5..         MOV     A,?V0 + 0
   \   0000EC   2402         ADD     A,#0x2
   \   0000EE   F5..         MOV     ?V0 + 0,A
   \   0000F0   E5..         MOV     A,?V0 + 1
   \   0000F2   3400         ADDC    A,#0x0
   \   0000F4   F5..         MOV     ?V0 + 1,A
   \                     ??zb_ReceiveDataIndication_8:
   \   0000F6   C3           CLR     C
   \   0000F7   E5..         MOV     A,?V0 + 0
   \   0000F9   95..         SUBB    A,?V0 + 4
   \   0000FB   E5..         MOV     A,?V0 + 1
   \   0000FD   95..         SUBB    A,?V0 + 5
   \   0000FF   4003         JC      $+5
   \   000101   02....       LJMP    ??zb_ReceiveDataIndication_10 & 0xFFFF
   \   000104   E5..         MOV     A,?V0 + 2
   \   000106   25..         ADD     A,?V0 + 0
   \   000108   F8           MOV     R0,A
   \   000109   E5..         MOV     A,?V0 + 3
   \   00010B   35..         ADDC    A,?V0 + 1
   \   00010D   F9           MOV     R1,A
   \   00010E   E8           MOV     A,R0
   \   00010F   FC           MOV     R4,A
   \   000110   E9           MOV     A,R1
   \   000111   FD           MOV     R5,A
   \   000112   8C82         MOV     DPL,R4
   \   000114   8D83         MOV     DPH,R5
   \   000116   A3           INC     DPTR
   \   000117   A882         MOV     R0,DPL
   \   000119   A983         MOV     R1,DPH
   \   00011B   8C82         MOV     DPL,R4
   \   00011D   8D83         MOV     DPH,R5
   \   00011F   E0           MOVX    A,@DPTR
   \   000120   FB           MOV     R3,A
   \   000121   8882         MOV     DPL,R0
   \   000123   8983         MOV     DPH,R1
   \   000125   E0           MOVX    A,@DPTR
   \   000126   FA           MOV     R2,A
   \   000127   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   00012A   EB           MOV     A,R3
   \   00012B   F0           MOVX    @DPTR,A
   \   00012C   05..         INC     ?V0 + 6
   \   00012E   8882         MOV     DPL,R0
   \   000130   8983         MOV     DPH,R1
   \   000132   E0           MOVX    A,@DPTR
   \   000133   C0E0         PUSH    A
   \   000135   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000138   D0E0         POP     A
   \   00013A   F0           MOVX    @DPTR,A
   \   00013B   05..         INC     ?V0 + 6
   \   00013D                ; Setup parameters for call to function paramRead
   \   00013D   85....       MOV     ?V0 + 8,?V0 + 6
   \   000140   85..82       MOV     DPL,?XSP + 0
   \   000143   85..83       MOV     DPH,?XSP + 1
   \   000146   E582         MOV     A,DPL
   \   000148   25..         ADD     A,?V0 + 8
   \   00014A   FC           MOV     R4,A
   \   00014B   E583         MOV     A,DPH
   \   00014D   3400         ADDC    A,#0x0
   \   00014F   FD           MOV     R5,A
   \   000150   12....       LCALL   ??paramRead?relay
   \   000153   8A..         MOV     ?V0 + 8,R2
   \   000155   A8..         MOV     R0,?V0 + 8
   \   000157   C3           CLR     C
   \   000158   E8           MOV     A,R0
   \   000159   9401         SUBB    A,#0x1
   \   00015B   EB           MOV     A,R3
   \   00015C   9400         SUBB    A,#0x0
   \   00015E   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000160   65D0         XRL     A,PSW
   \   000162   33           RLC     A
   \   000163   5080         JNC     ??zb_ReceiveDataIndication_9
   \   000165   7401         MOV     A,#0x1
   \   000167   85..82       MOV     DPL,?XSP + 0
   \   00016A   85..83       MOV     DPH,?XSP + 1
   \   00016D   F0           MOVX    @DPTR,A
   \   00016E                ; Setup parameters for call to function zb_SendDataRequest
   \   00016E   75..00       MOV     ?V0 + 0,#0x0
   \   000171   78..         MOV     R0,#?V0 + 0
   \   000173   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000176   75..10       MOV     ?V0 + 0,#0x10
   \   000179   78..         MOV     R0,#?V0 + 0
   \   00017B   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00017E   75..00       MOV     ?V0 + 0,#0x0
   \   000181   78..         MOV     R0,#?V0 + 0
   \   000183   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000186   7403         MOV     A,#0x3
   \   000188   12....       LCALL   ?XSTACK_DISP0_8
   \   00018B   8582..       MOV     ?V0 + 0,DPL
   \   00018E   8583..       MOV     ?V0 + 1,DPH
   \   000191   78..         MOV     R0,#?V0 + 0
   \   000193   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000196   7901         MOV     R1,#0x1
   \   000198   8031         SJMP    ??zb_ReceiveDataIndication_11
    391              }
    392              dat[0] = 0;
   \                     ??zb_ReceiveDataIndication_10:
   \   00019A   E4           CLR     A
   \   00019B   85..82       MOV     DPL,?XSP + 0
   \   00019E   85..83       MOV     DPH,?XSP + 1
   \   0001A1   F0           MOVX    @DPTR,A
    393              zb_SendDataRequest( source, ID_CMD_READ_RES, rlen, dat, 0, AF_ACK_REQUEST, 0 );
   \   0001A2                ; Setup parameters for call to function zb_SendDataRequest
   \   0001A2   F5..         MOV     ?V0 + 0,A
   \   0001A4   78..         MOV     R0,#?V0 + 0
   \   0001A6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001A9   75..10       MOV     ?V0 + 0,#0x10
   \   0001AC   78..         MOV     R0,#?V0 + 0
   \   0001AE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001B1   75..00       MOV     ?V0 + 0,#0x0
   \   0001B4   78..         MOV     R0,#?V0 + 0
   \   0001B6   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001B9   7403         MOV     A,#0x3
   \   0001BB   12....       LCALL   ?XSTACK_DISP0_8
   \   0001BE   8582..       MOV     ?V0 + 0,DPL
   \   0001C1   8583..       MOV     ?V0 + 1,DPH
   \   0001C4   78..         MOV     R0,#?V0 + 0
   \   0001C6   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C9   A9..         MOV     R1,?V0 + 6
   \                     ??zb_ReceiveDataIndication_11:
   \   0001CB   7C01         MOV     R4,#0x1
   \                     ??zb_ReceiveDataIndication_7:
   \   0001CD   7D80         MOV     R5,#-0x80
   \   0001CF   EE           MOV     A,R6
   \   0001D0   FA           MOV     R2,A
   \   0001D1   EF           MOV     A,R7
   \   0001D2   FB           MOV     R3,A
   \   0001D3   12....       LCALL   ??zb_SendDataRequest?relay
   \   0001D6   7405         MOV     A,#0x5
   \   0001D8   12....       LCALL   ?DEALLOC_XSTACK8
    394              break;
    395            }
    396          }
   \                     ??zb_ReceiveDataIndication_0:
   \   0001DB   7440         MOV     A,#0x40
   \   0001DD   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001E0   7F0A         MOV     R7,#0xa
   \   0001E2   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   85....       MOV     ?V0 + 8,?V0 + 6
   \   000003   85..82       MOV     DPL,?XSP + 0
   \   000006   85..83       MOV     DPH,?XSP + 1
   \   000009   E582         MOV     A,DPL
   \   00000B   25..         ADD     A,?V0 + 8
   \   00000D   F582         MOV     DPL,A
   \   00000F   E583         MOV     A,DPH
   \   000011   3400         ADDC    A,#0x0
   \   000013   F583         MOV     DPH,A
   \   000015   22           RET
    397          
    398          
    399          /******************************************************************************
    400           * @fn          lightSet
    401           *
    402           * @brief       Reports temperature sensor reading
    403           *
    404           * @param
    405           *
    406           * @return
    407           */
    408          static void lightSet(byte st)
    409          {
    410            if (st == 0 ) {
    411              if (lightstatus != 0) {
    412                light_onoff(0);
    413                lightstatus = 0;
    414                osal_set_event(sapi_TaskID, MY_REPORT_EVT);
    415              }
    416            }
    417            else if (st == 1 ) {
    418              if (lightstatus != 1) {
    419                light_onoff(1);
    420                lightstatus = 1;  
    421                osal_set_event(sapi_TaskID, MY_REPORT_EVT);
    422              }
    423            }
    424            else { 
    425              if (lightstatus  & 0x01) {
    426                light_onoff(0);
    427              } else {
    428                light_onoff(1);
    429              }
    430              lightstatus ^= 1;
    431              osal_set_event(sapi_TaskID, MY_REPORT_EVT);
    432            }
    433          }
    434          
    435          /******************************************************************************
    436           * @fn          myApp_ReadTemperature
    437           *
    438           * @brief       Reports temperature sensor reading
    439           *
    440           * @param
    441           *
    442           * @return
    443           */
    444          
    445          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    446          static int paramWrite(uint16 pid, byte *dat)
   \                     paramWrite:
    447          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    448            int len = 0;
   \   000005   7E00         MOV     R6,#0x0
    449            switch (pid) {
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   8B..         MOV     ?V0 + 1,R3
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   12....       LCALL   ?US_SWITCH_DENSE
   \                     `?<Jumptable for paramWrite>_0`:
   \   000010   0102         DW        513
   \   000012   01           DB        1
   \   000013   ....         DW        ??paramWrite_0
   \   000015   ....         DW        ??paramWrite_1
   \   000017   ....         DW        ??paramWrite_2
    450            case 0x0201:
    451              brightness = dat[0];
   \                     ??paramWrite_1:
   \   000019   8C82         MOV     DPL,R4
   \   00001B   8D83         MOV     DPH,R5
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   90....       MOV     DPTR,#brightness
   \   000021   F0           MOVX    @DPTR,A
    452              len = 1;
   \   000022   8057         SJMP    ??paramWrite_3
    453              break;
    454            case 0x0202:
    455              lightSet(dat[0]);
   \                     ??paramWrite_2:
   \   000024   8C82         MOV     DPL,R4
   \   000026   8D83         MOV     DPH,R5
   \   000028   E0           MOVX    A,@DPTR
   \   000029   FA           MOV     R2,A
   \   00002A   7015         JNZ     ??paramWrite_4
   \   00002C   90....       MOV     DPTR,#lightstatus
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   6049         JZ      ??paramWrite_3
   \   000032                ; Setup parameters for call to function light_onoff
   \   000032   7900         MOV     R1,#0x0
   \   000034   12....       LCALL   ??light_onoff?relay
   \   000037   E4           CLR     A
   \   000038   90....       MOV     DPTR,#lightstatus
   \   00003B   F0           MOVX    @DPTR,A
   \   00003C                ; Setup parameters for call to function osal_set_event
   \   00003C   7A02         MOV     R2,#0x2
   \   00003E   FB           MOV     R3,A
   \   00003F   8032         SJMP    ??paramWrite_5
   \                     ??paramWrite_4:
   \   000041   7401         MOV     A,#0x1
   \   000043   6A           XRL     A,R2
   \   000044   90....       MOV     DPTR,#lightstatus
   \   000047   7011         JNZ     ??paramWrite_6
   \   000049   E0           MOVX    A,@DPTR
   \   00004A   6401         XRL     A,#0x1
   \   00004C   602D         JZ      ??paramWrite_3
   \   00004E                ; Setup parameters for call to function light_onoff
   \   00004E   7901         MOV     R1,#0x1
   \   000050   12....       LCALL   ??light_onoff?relay
   \   000053   7401         MOV     A,#0x1
   \   000055   90....       MOV     DPTR,#lightstatus
   \   000058   8014         SJMP    ??paramWrite_7
   \                     ??paramWrite_6:
   \   00005A   E0           MOVX    A,@DPTR
   \   00005B   A2E0         MOV     C,0xE0 /* A   */.0
   \   00005D   5004         JNC     ??paramWrite_8
   \   00005F                ; Setup parameters for call to function light_onoff
   \   00005F   7900         MOV     R1,#0x0
   \   000061   8002         SJMP    ??paramWrite_9
   \                     ??paramWrite_8:
   \   000063                ; Setup parameters for call to function light_onoff
   \   000063   7901         MOV     R1,#0x1
   \                     ??paramWrite_9:
   \   000065   12....       LCALL   ??light_onoff?relay
   \   000068   90....       MOV     DPTR,#lightstatus
   \   00006B   E0           MOVX    A,@DPTR
   \   00006C   6401         XRL     A,#0x1
   \                     ??paramWrite_7:
   \   00006E   F0           MOVX    @DPTR,A
   \   00006F                ; Setup parameters for call to function osal_set_event
   \   00006F   7A02         MOV     R2,#0x2
   \   000071   7B00         MOV     R3,#0x0
   \                     ??paramWrite_5:
   \   000073   90....       MOV     DPTR,#sapi_TaskID
   \   000076   E0           MOVX    A,@DPTR
   \   000077   F9           MOV     R1,A
   \   000078   12....       LCALL   ??osal_set_event?relay
    456              len = 1;
   \                     ??paramWrite_3:
   \   00007B   0E           INC     R6
    457              break;
    458            }
    459            return len;
   \                     ??paramWrite_0:
   \   00007C   EE           MOV     A,R6
   \   00007D   FA           MOV     R2,A
   \   00007E   7B00         MOV     R3,#0x0
   \   000080   02....       LJMP    ?Subroutine0 & 0xFFFF
    460          }
    461          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    462          static int paramRead(uint16 pid, byte *dat)
   \                     paramRead:
    463          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
   \   000009   EC           MOV     A,R4
   \   00000A   FE           MOV     R6,A
   \   00000B   ED           MOV     A,R5
   \   00000C   FF           MOV     R7,A
    464            int len = 0;
   \   00000D   7A00         MOV     R2,#0x0
   \   00000F   7B00         MOV     R3,#0x0
    465            switch (pid) {
   \   000011   78..         MOV     R0,#?V0 + 0
   \   000013   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for paramRead>_0`:
   \   000016   0000         DW        0
   \   000018   0900         DW        9
   \   00001A   0100         DW        1
   \   00001C   ....         DW        ??paramRead_0
   \   00001E   0200         DW        2
   \   000020   ....         DW        ??paramRead_1
   \   000022   0300         DW        3
   \   000024   ....         DW        ??paramRead_2
   \   000026   0400         DW        4
   \   000028   ....         DW        ??paramRead_3
   \   00002A   0500         DW        5
   \   00002C   ....         DW        ??paramRead_4
   \   00002E   1400         DW        20
   \   000030   ....         DW        ??paramRead_5
   \   000032   1500         DW        21
   \   000034   ....         DW        ??paramRead_6
   \   000036   0102         DW        513
   \   000038   ....         DW        ??paramRead_7
   \   00003A   0202         DW        514
   \   00003C   ....         DW        ??paramRead_8
   \   00003E   ....         DW        ??paramRead_9
    466            case 0x0001:
    467              dat[0] = 0x11; dat[1] = 0x33;
   \                     ??paramRead_0:
   \   000040   7411         MOV     A,#0x11
   \   000042   8E82         MOV     DPL,R6
   \   000044   8F83         MOV     DPH,R7
   \   000046   F0           MOVX    @DPTR,A
   \   000047   7433         MOV     A,#0x33
   \                     ??paramRead_10:
   \   000049   A3           INC     DPTR
   \   00004A   F0           MOVX    @DPTR,A
    468              len = 2;
   \   00004B   0A           INC     R2
   \   00004C   8062         SJMP    ??paramRead_11
    469              break;
    470            case 0x0002:
    471              dat[0] = 0x22; dat[1] = 0x44;
   \                     ??paramRead_1:
   \   00004E   7422         MOV     A,#0x22
   \   000050   8E82         MOV     DPL,R6
   \   000052   8F83         MOV     DPH,R7
   \   000054   F0           MOVX    @DPTR,A
   \   000055   7444         MOV     A,#0x44
   \   000057   80F0         SJMP    ??paramRead_10
    472              len = 2;
    473              break;
    474            case 0x0003:
    475              dat[0] = 0x00; dat[1] = 0x01;
   \                     ??paramRead_2:
   \   000059   E4           CLR     A
   \   00005A   8E82         MOV     DPL,R6
   \   00005C   8F83         MOV     DPH,R7
   \   00005E   F0           MOVX    @DPTR,A
   \   00005F   7401         MOV     A,#0x1
   \   000061   80E6         SJMP    ??paramRead_10
    476              len = 2;
    477              break;
    478            case 0x0004:
    479              dat[0] = dat[1] = dat[2] = dat[3] = dat[4] = dat[5] = 1;
   \                     ??paramRead_3:
   \   000063   7401         MOV     A,#0x1
   \   000065   8E82         MOV     DPL,R6
   \   000067   8F83         MOV     DPH,R7
   \   000069   A3           INC     DPTR
   \   00006A   A3           INC     DPTR
   \   00006B   A3           INC     DPTR
   \   00006C   A3           INC     DPTR
   \   00006D   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   000070   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000073   12....       LCALL   ??Subroutine5_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   000076   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000079   F0           MOVX    @DPTR,A
   \   00007A   8E82         MOV     DPL,R6
   \   00007C   8F83         MOV     DPH,R7
   \   00007E   F0           MOVX    @DPTR,A
    480              len = 6;
   \   00007F   7A06         MOV     R2,#0x6
   \   000081   802E         SJMP    ??paramRead_9
    481              break;
    482            case 0x0005:
    483              dat[0] = DEV_ID_LIGHT;
   \                     ??paramRead_4:
   \   000083   7402         MOV     A,#0x2
   \   000085   8024         SJMP    ??paramRead_12
    484              len = 1;
    485              break;
    486              
    487            /* -----------  网络参数 ------------------- */  
    488            case 0x0014: //mac地址
    489               /*osal_nv_read( ZCD_NV_EXTADDR, 0, Z_EXTADDR_LEN, pBuf ); rm by liren */
    490              ZMacGetReq( ZMacExtAddr, dat ); // add by liren
   \                     ??paramRead_5:
   \   000087                ; Setup parameters for call to function ZMacGetReq
   \   000087   EE           MOV     A,R6
   \   000088   FA           MOV     R2,A
   \   000089   EF           MOV     A,R7
   \   00008A   FB           MOV     R3,A
   \   00008B   79E2         MOV     R1,#-0x1e
   \   00008D   12....       LCALL   ??ZMacGetReq?relay
    491              // Outgoing extended address needs to be reversed
    492              MT_ReverseBytes( dat, Z_EXTADDR_LEN );
   \   000090                ; Setup parameters for call to function MT_ReverseBytes
   \   000090   7908         MOV     R1,#0x8
   \   000092   EE           MOV     A,R6
   \   000093   FA           MOV     R2,A
   \   000094   EF           MOV     A,R7
   \   000095   FB           MOV     R3,A
   \   000096   12....       LCALL   ??MT_ReverseBytes?relay
    493              len = Z_EXTADDR_LEN;
   \   000099   7A08         MOV     R2,#0x8
   \   00009B   7B00         MOV     R3,#0x0
   \   00009D   8012         SJMP    ??paramRead_9
    494              break;
    495            case 0x0015:
    496            {
    497                uint8 assocCnt = 0;
    498                uint16 *assocList;
    499                int i;
    500          #if defined(RTR_NWK) && !defined( NONWK )
    501              assocList = AssocMakeList( &assocCnt );
    502          #else
    503              assocCnt = 0;
    504              assocList = NULL;
    505          #endif
    506              dat[0] = assocCnt;
   \                     ??paramRead_6:
   \   00009F   E4           CLR     A
   \   0000A0   8009         SJMP    ??paramRead_12
    507              for (i=0; i<assocCnt&&i<16; i++) {
    508                dat[1+2*i] = HI_UINT16(assocList[i]);
    509                dat[1+2*i+1] = LO_UINT16(assocList[i]);
    510              }
    511              len = 1 + 2 * assocCnt;
    512              break;
    513            }
    514           /* ------------------------------------ */
    515            case 0x0201:
    516              dat[0] = brightness;
   \                     ??paramRead_7:
   \   0000A2   90....       MOV     DPTR,#brightness
   \   0000A5   8003         SJMP    ??paramRead_13
    517              len = 1;
    518              break;
    519            case 0x0202:
    520              dat[0] = lightstatus;
   \                     ??paramRead_8:
   \   0000A7   90....       MOV     DPTR,#lightstatus
   \                     ??paramRead_13:
   \   0000AA   E0           MOVX    A,@DPTR
   \                     ??paramRead_12:
   \   0000AB   8E82         MOV     DPL,R6
   \   0000AD   8F83         MOV     DPH,R7
   \   0000AF   F0           MOVX    @DPTR,A
    521              len = 1;
   \                     ??paramRead_11:
   \   0000B0   0A           INC     R2
    522              break;
    523            }
    524            return len;
   \                     ??paramRead_9:
   \   0000B1   02....       LJMP    ?Subroutine0 & 0xFFFF
    525          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine5_0
   \   000001                ; // Fall through to label ??Subroutine5_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine5_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8E82         MOV     DPL,R6
   \   000003   8F83         MOV     DPH,R7
   \   000005   A3           INC     DPTR
   \   000006   22           RET

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for myStartRetryDelay>`:
   \   000000   1027         DW 10000

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??light_init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    light_init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??light_onoff?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    light_onoff

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_HandleOsalEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_HandleOsalEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_HandleKeys?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_HandleKeys

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_StartConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_StartConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_SendDataConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_SendDataConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_BindConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_BindConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_AllowBindConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_AllowBindConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_FindDeviceConfirm?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_FindDeviceConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_HanderMsg?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_HanderMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zb_ReceiveDataIndication?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zb_ReceiveDataIndication

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??paramWrite?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    paramWrite

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??paramRead?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    paramRead

   Maximum stack usage in bytes:

     Function                   ISTACK PSTACK XSTACK
     --------                   ------ ------ ------
     light_init                     2      0     18
       -> light_onoff               4      0      0
     light_onoff                    0      0     10
     paramRead                      1      0     92
       -> ZMacGetReq                0      0     20
       -> MT_ReverseBytes           0      0     20
     paramWrite                     0      0     92
       -> light_onoff               0      0     20
       -> osal_set_event            0      0     20
       -> light_onoff               0      0     20
       -> osal_set_event            0      0     20
       -> light_onoff               0      0     20
       -> light_onoff               0      0     20
       -> osal_set_event            0      0     20
     zb_AllowBindConfirm            0      0      0
     zb_BindConfirm                 0      0      0
     zb_FindDeviceConfirm           0      0      0
     zb_HanderMsg                   0      0      0
     zb_HandleKeys                  0      0      0
     zb_HandleOsalEvent             1      0     23
       -> zb_ReadConfiguration      0      0     36
       -> zb_WriteConfiguration     0      0     36
       -> zb_ReadConfiguration      0      0     36
       -> zb_WriteConfiguration     0      0     36
       -> light_init                0      0     36
       -> zb_StartRequest           0      0     36
       -> HalLedSet                 0      0     36
       -> HalLedSet                 0      0     36
       -> zb_SendDataRequest        0      0     46
     zb_ReceiveDataIndication       1      0     91
       -> HalLedSet                 0      0    164
       -> HalLedSet                 0      0    164
       -> paramWrite                0      0    164
       -> zb_SendDataRequest        0      0    174
       -> zb_SendDataRequest        0      0    174
       -> paramRead                 0      0    164
       -> zb_SendDataRequest        0      0    174
       -> zb_SendDataRequest        0      0    174
     zb_SendDataConfirm             0      0      0
     zb_StartConfirm                0      0      9
       -> osal_start_timerEx        0      0     18


   Segment part sizes:

     Function/Label                       Bytes
     --------------                       -----
     _A_P0                                   1
     P0DIR                                   1
     myAppState                              1
     myStartRetryDelay                       2
     brightness                              1
     lightstatus                             1
     light_init                             23
     light_onoff                            12
     zb_InCmdList                            4
     zb_OutCmdList                           6
     zb_SimpleDesc                          12
     zb_HandleOsalEvent                    247
     ?Subroutine0                            5
     ?Subroutine1                           15
     zb_HandleKeys                           3
     zb_StartConfirm                        41
     zb_SendDataConfirm                      3
     zb_BindConfirm                          3
     zb_AllowBindConfirm                     3
     zb_FindDeviceConfirm                    3
     zb_HanderMsg                            3
     zb_ReceiveDataIndication              485
     ?Subroutine2                           22
     paramWrite                            131
     paramRead                             180
     ?Subroutine3                            6
     ?Subroutine4                            1
     ??Subroutine5_0                         7
     ?<Initializer for myStartRetryDelay>    2
     ??light_init?relay                      6
     ??light_onoff?relay                     6
     ??zb_HandleOsalEvent?relay              6
     ??zb_HandleKeys?relay                   6
     ??zb_StartConfirm?relay                 6
     ??zb_SendDataConfirm?relay              6
     ??zb_BindConfirm?relay                  6
     ??zb_AllowBindConfirm?relay             6
     ??zb_FindDeviceConfirm?relay            6
     ??zb_HanderMsg?relay                    6
     ??zb_ReceiveDataIndication?relay        6
     ??paramWrite?relay                      6
     ??paramRead?relay                       6

 
 1 193 bytes in segment BANKED_CODE
    78 bytes in segment BANK_RELAYS
     2 bytes in segment SFR_AN
     2 bytes in segment XDATA_I
     2 bytes in segment XDATA_ID
    22 bytes in segment XDATA_ROM_C
     3 bytes in segment XDATA_Z
 
 1 273 bytes of CODE  memory
    22 bytes of CONST memory
     0 bytes of DATA  memory (+ 2 bytes shared)
     5 bytes of XDATA memory

Errors: none
Warnings: 1
